<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>BTC/USDT 일봉 차트</title>
  <!-- PapaParse (CSV 파싱) -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <!-- Chart.js (차트 렌더링) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    canvas {
      display: block;
      margin: 0 auto;
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <h1>BTC/USDT 종가 차트</h1>
  <canvas id="btcChart" width="800" height="400"></canvas>

  <script>
    // docs/data/BTC_USDT.csv 경로로 fetch
    fetch('data/BTC_USDT.csv')
      .then(response => response.text())
      .then(csvText => {
        // CSV 파싱 (header: 첫 줄을 키로 사용, dynamicTyping: 숫자를 숫자로)
        const parsed = Papa.parse(csvText, {
          header: true,
          dynamicTyping: true
        }).data;

        // 라벨(날짜)과 데이터(종가) 추출
        const labels = parsed.map(row => row.date);
        const prices = parsed.map(row => row.close);

        // Chart.js로 라인 차트 생성
        new Chart(document.getElementById('btcChart'), {
          type: 'line',
          data: {
            labels: labels,
            datasets: [{
              label: '종가 (USDT)',
              data: prices,
              tension: 0.1
            }]
          },
          options: {
            scales: {
              x: {
                display: true,
                title: { display: true, text: '날짜' }
              },
              y: {
                display: true,
                title: { display: true, text: '가격 (USDT)' }
              }
            }
          }
        });
      })
      .catch(err => {
        console.error('CSV 로딩/파싱 중 오류:', err);
      });
  </script>
</body>
</html>
